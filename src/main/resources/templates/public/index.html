<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragmentos/layouts/base-layout :: fullPage(
          pageTitle='Biblioteca Virtual - Inicio',
          pageAdditionalCss=~{::indexCss},
          pageContent=~{::indexContent},
          pageAdditionalScripts=~{::indexScripts}
      )}">

<head>
  <th:block th:fragment="indexCss">
    <style>
      .hero-section {
        background: linear-gradient(135deg, rgba(45, 110, 126, 0.9), rgba(91, 125, 135, 0.8)),
          url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80');
        background-size: cover;
        background-position: center;
        background-attachment: scroll;
        color: white;
        min-height: 80vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
        z-index: 1;
        padding: 2rem 0;
      }

      .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(217, 165, 102, 0.1) 50%, transparent 70%);
        animation: shimmer 8s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes shimmer {

        0%,
        100% {
          opacity: 0;
        }

        50% {
          opacity: 1;
        }
      }

      .hero-content {
        position: relative;
        z-index: 2;
      }

      .hero-search {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin: 0 auto;
        max-width: 100%;
      }

      .hero-search .form-control {
        border: none;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        padding: 1rem 1.5rem;
        font-size: 1.1rem;
        min-height: 50px;
      }

      .hero-search .btn {
        border-radius: 10px;
        padding: 1rem 1.5rem;
        font-weight: 600;
        box-shadow: 0 3px 10px rgba(45, 110, 126, 0.3);
        min-height: 50px;
        white-space: nowrap;
      }

      .enhanced-card {
        background: linear-gradient(135deg, #ffffff 0%, rgba(245, 245, 240, 0.5) 100%);
        border: 1px solid rgba(45, 110, 126, 0.1);
        border-radius: 20px;
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        z-index: 1;
      }

      .enhanced-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(45, 110, 126, 0.1), transparent);
        transition: left 0.5s;
      }

      .enhanced-card:hover::before {
        left: 100%;
      }

      .enhanced-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 40px rgba(45, 110, 126, 0.15);
        border-color: var(--bs-primary);
      }

      .feature-icon-enhanced {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 2.5rem;
        position: relative;
        background: linear-gradient(135deg, var(--bs-primary), var(--bs-info));
        color: white;
        box-shadow: 0 10px 20px rgba(45, 110, 126, 0.3);
      }

      .book-card-enhanced {
        border-radius: 20px;
        overflow: hidden;
        transition: all 0.4s ease;
        background: linear-gradient(135deg, #ffffff 0%, rgba(245, 245, 240, 0.8) 100%);
        border: 1px solid rgba(45, 110, 126, 0.1);
        position: relative;
        width: 280px;
        flex-shrink: 0;
        margin-right: 20px;
      }

      .book-card-enhanced:hover {
        transform: translateY(-15px) rotateY(5deg);
        box-shadow: 0 25px 50px rgba(45, 110, 126, 0.2);
      }

      .book-cover-enhanced {
        height: 280px;
        width: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
        border-radius: 15px 15px 0 0;
      }

      .book-card-enhanced:hover .book-cover-enhanced {
        transform: scale(1.05);
      }

      /* Slider de libros destacados */
      .books-slider-container {
        overflow: hidden;
        position: relative;
        width: 100%;
      }

      .books-slider {
        display: flex;
        transition: transform 0.5s ease;
        width: fit-content;
      }

      .category-card-enhanced {
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        transition: all 0.4s ease;
        height: 350px;
        z-index: 1;
      }

      .category-card-enhanced::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg,
            rgba(45, 110, 126, 0.8) 0%,
            rgba(91, 125, 135, 0.6) 50%,
            rgba(45, 110, 126, 0.8) 100%);
        transition: opacity 0.4s ease;
        z-index: 1;
      }

      .category-card-enhanced:hover::before {
        opacity: 0.9;
      }

      .category-card-enhanced:hover {
        transform: scale(1.05) rotateZ(1deg);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .category-card-enhanced .card-img {
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
      }

      .category-card-enhanced:hover .card-img {
        transform: scale(1.1);
      }

      .category-card-enhanced .card-img-overlay {
        z-index: 2;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 2rem;
      }

      .cta-section-enhanced {
        background: linear-gradient(135deg,
            rgba(45, 110, 126, 0.95) 0%,
            rgba(192, 107, 62, 0.9) 50%,
            rgba(45, 110, 126, 0.95) 100%),
          url("https://images.unsplash.com/photo-1535905557558-afc4877a26fc?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80");
        background-size: cover;
        background-position: center;
        background-attachment: scroll;
        color: white;
        padding: 80px 0;
        position: relative;
        overflow: hidden;
        z-index: 1;
        margin: 0;
        width: 100%;
      }

      .cta-section-enhanced::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(217, 165, 102, 0.1) 0%, transparent 70%);
        animation: rotate 20s linear infinite;
        z-index: 1;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      .cta-content {
        position: relative;
        z-index: 2;
      }

      .testimonial-card-enhanced {
        background: linear-gradient(135deg, #ffffff 0%, rgba(245, 245, 240, 0.9) 100%);
        border: none;
        border-radius: 20px;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(45, 110, 126, 0.1);
        z-index: 1;
      }

      .testimonial-card-enhanced::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--bs-primary), var(--bs-secondary), var(--bs-success));
        transform: scaleX(0);
        transition: transform 0.4s ease;
      }

      .testimonial-card-enhanced:hover::before {
        transform: scaleX(1);
      }

      .testimonial-card-enhanced:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(45, 110, 126, 0.2);
      }

      /* Navegación de Carruseles */
      .carousel-nav-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        border: 2px solid var(--bs-primary);
        background: linear-gradient(135deg, var(--bs-primary), var(--bs-info));
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(45, 110, 126, 0.3);
        cursor: pointer;
        z-index: 10;
      }

      .carousel-nav-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 10px 25px rgba(45, 110, 126, 0.4);
        color: white;
      }

      .carousel-nav-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Sección de Estadísticas */
      .stats-section {
        background: linear-gradient(135deg, var(--bs-primary) 0%, var(--bs-info) 100%);
        color: white;
        padding: 80px 0;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .stats-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }

      .stat-item {
        text-align: center;
        position: relative;
        z-index: 2;
      }

      .stat-number {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: linear-gradient(45deg, #fff, rgba(217, 165, 102, 0.8));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .animate-on-scroll.animated {
        opacity: 1;
        transform: translateY(0);
      }

      section {
        position: relative;
        z-index: 1;
        clear: both;
      }

      @media (max-width: 480px) {
        .hero-section {
          min-height: 70vh;
          padding: 1rem 0;
        }

        .hero-content h1 {
          font-size: 2.5rem !important;
        }

        .hero-content .lead {
          font-size: 1.1rem !important;
        }

        .hero-search {
          padding: 1rem;
          margin: 0 0.5rem;
          border-radius: 10px;
        }

        .hero-search .form-control {
          padding: 0.75rem 1rem;
          font-size: 1rem;
          min-height: 45px;
        }

        .hero-search .btn {
          padding: 0.75rem 1rem;
          font-size: 0.9rem;
          min-height: 45px;
        }

        .hero-search .row.g-3 {
          --bs-gutter-x: 0.5rem;
        }

        .hero-search .col-md-8,
        .hero-search .col-md-4 {
          margin-bottom: 0.5rem;
        }

        .hero-search .d-flex.gap-3 {
          gap: 0.5rem !important;
          flex-direction: column;
        }

        .hero-search .btn-lg {
          padding: 0.75rem 1rem;
          font-size: 0.9rem;
        }

        .feature-icon-enhanced {
          width: 60px;
          height: 60px;
          font-size: 1.5rem;
        }

        .stat-number {
          font-size: 2rem;
        }

        .cta-section-enhanced {
          padding: 40px 0;
        }

        .book-card-enhanced {
          width: 220px;
          margin-right: 10px;
        }

        .books-slider {
          padding-left: 10px;
        }

        .carousel-nav-btn {
          width: 40px;
          height: 40px;
        }

        .category-card-enhanced {
          height: 250px;
        }

        .category-card-enhanced .card-img-overlay {
          padding: 1rem;
        }

        .category-card-enhanced .card-title {
          font-size: 1.25rem;
        }

        .category-card-enhanced .card-text {
          font-size: 0.9rem;
        }
      }

      @media (max-width: 320px) {
        .hero-section {
          min-height: 60vh;
          padding: 0.5rem 0;
        }

        .hero-content h1 {
          font-size: 2rem !important;
          margin-bottom: 1rem !important;
        }

        .hero-content .lead {
          font-size: 1rem !important;
          margin-bottom: 2rem !important;
        }

        .hero-search {
          padding: 0.75rem;
          margin: 0 0.25rem;
          border-radius: 8px;
        }

        .hero-search .form-control {
          padding: 0.6rem 0.8rem;
          font-size: 0.9rem;
          min-height: 40px;
          border-radius: 8px;
        }

        .hero-search .btn {
          padding: 0.6rem 0.8rem;
          font-size: 0.8rem;
          min-height: 40px;
          border-radius: 8px;
        }

        .hero-search .col-md-8,
        .hero-search .col-md-4 {
          flex: 0 0 100%;
          max-width: 100%;
        }

        .hero-search .row.g-3 {
          --bs-gutter-x: 0.25rem;
          --bs-gutter-y: 0.5rem;
        }

        .hero-search .d-flex.gap-3 {
          gap: 0.25rem !important;
          flex-direction: column;
          margin-top: 1rem !important;
        }

        .hero-search .btn-lg {
          padding: 0.6rem 0.8rem;
          font-size: 0.8rem;
        }

        .hero-search .btn i {
          font-size: 0.8rem;
        }

        .enhanced-card .card-body {
          padding: 1rem !important;
        }

        .feature-icon-enhanced {
          width: 50px;
          height: 50px;
          font-size: 1.25rem;
          margin-bottom: 1rem;
        }

        .stat-number {
          font-size: 1.5rem;
        }

        .stat-item h5 {
          font-size: 0.9rem;
        }

        .book-card-enhanced {
          width: 200px;
          margin-right: 8px;
        }

        .book-cover-enhanced {
          height: 240px;
        }

        .carousel-nav-btn {
          width: 35px;
          height: 35px;
          font-size: 0.8rem;
        }

        .testimonial-card-enhanced .card-body {
          padding: 1rem !important;
        }

        .testimonial-card-enhanced .fs-5 {
          font-size: 0.9rem !important;
        }
      }

      @media (max-width: 768px) {
        .hero-section {
          min-height: 60vh;
        }

        .hero-search {
          padding: 1.5rem;
          margin: 0 1rem;
        }

        .feature-icon-enhanced {
          width: 70px;
          height: 70px;
          font-size: 2rem;
        }

        .stat-number {
          font-size: 2rem;
        }

        .cta-section-enhanced {
          padding: 60px 0;
        }

        .book-card-enhanced {
          width: 250px;
          margin-right: 15px;
        }

        .books-slider {
          padding-left: 15px;
        }
      }

      html {
        scroll-behavior: smooth;
      }

      .fade-in {
        animation: fadeIn 0.8s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .hero-section::before,
      .cta-section-enhanced::before {
        will-change: transform;
      }

      body {
        overflow-x: hidden;
      }

      .container-fluid,
      .container {
        max-width: 100%;
        padding-left: 15px;
        padding-right: 15px;
      }

      @media (max-width: 320px) {
        .container {
          padding-left: 10px;
          padding-right: 10px;
        }
      }
    </style>
  </th:block>
</head>

<body>
  <th:block th:fragment="indexContent">
    <section class="hero-section">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-10 col-xl-8">
            <div class="hero-content text-center fade-in">
              <h1 class="display-2 fw-bold mb-4">
                Tu <span style="color: var(--bs-secondary);">Biblioteca</span> Digital
              </h1>
              <p class="lead fs-3 mb-5 opacity-90">
                Explora nuestra colección de miles de libros disponibles para préstamo en cualquier momento y lugar
              </p>

              <div class="hero-search">
                <form id="searchForm" th:action="@{/catalogo}" method="get">
                  <div class="row g-3 align-items-center">
                    <div class="col-md-8 col-12">
                      <input class="form-control form-control-lg" type="search" name="tituloObra"
                        placeholder="¿Qué quieres leer hoy?" aria-label="Buscar" required />
                    </div>
                    <div class="col-md-4 col-12">
                      <button class="btn btn-primary btn-lg w-100" type="submit">
                        <i class="bi bi-search me-2"></i>Buscar
                      </button>
                    </div>
                  </div>
                </form>

                <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
                  <a th:href="@{/catalogo}" class="btn btn-outline-primary btn-lg flex-fill">
                    <i class="bi bi-grid me-2"></i>Ver catálogo
                  </a>
                  <a th:href="@{/planes}" class="btn btn-secondary btn-lg flex-fill">
                    <i class="bi bi-star me-2"></i>Planes Premium
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección de Estadísticas -->
    <section class="container py-5">
      <div class="text-center mb-5 animate-on-scroll">
        <h2 class="display-5 fw-bold mb-3">¿Por qué elegir BiblioVirtual?</h2>
        <p class="lead text-muted">Descubre las ventajas de nuestra plataforma digital</p>
      </div>

      <div class="row g-4">
        <!-- Características basadas en beneficios reales -->
        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced bg-primary mb-4">
                <i class="bi bi-book-half"></i>
              </div>
              <h4 class="card-title fw-bold mb-3">Catálogo Extenso</h4>
              <p class="card-text text-muted">
                Accede a más de <strong>100,000+ títulos</strong> en nuestra biblioteca digital,
                desde bestsellers hasta clásicos literarios.
              </p>
              <ul class="list-unstyled small text-start">
                <li><i class="bi bi-check text-success me-2"></i>Libros digitales</li>
                <li><i class="bi bi-check text-success me-2"></i>Audiolibros</li>
                <li><i class="bi bi-check text-success me-2"></i>Contenido exclusivo</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced bg-info mb-4">
                <i class="bi bi-display"></i>
              </div>
              <h4 class="card-title fw-bold mb-3">Multiplataforma</h4>
              <p class="card-text text-muted">
                Lee donde quieras, cuando quieras. Sincronización automática
                entre todos tus dispositivos.
              </p>
              <ul class="list-unstyled small text-start">
                <li><i class="bi bi-check text-success me-2"></i>Sincronización automática</li>
                <li><i class="bi bi-check text-success me-2"></i>Lectura offline</li>
                <li><i class="bi bi-check text-success me-2"></i>Múltiples dispositivos</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced bg-success mb-4">
                <i class="bi bi-people-fill"></i>
              </div>
              <h4 class="card-title fw-bold mb-3">Experiencia Social</h4>
              <p class="card-text text-muted">
                Únete a grupos de lectura, comparte notas y descubre
                recomendaciones personalizadas con IA.
              </p>
              <ul class="list-unstyled small text-start">
                <li><i class="bi bi-check text-success me-2"></i>Grupos de lectura</li>
                <li><i class="bi bi-check text-success me-2"></i>Recomendaciones IA</li>
                <li><i class="bi bi-check text-success me-2"></i>Perfiles familiares</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Categorías Populares -->
    <section class="container py-5">
      <div class="text-center mb-5 animate-on-scroll">
        <h2 class="display-5 fw-bold mb-3">Explora por categorías</h2>
        <p class="lead text-muted">Encuentra tu próxima lectura favorita</p>
      </div>

      <div class="row g-4 mb-5">
        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card category-card-enhanced text-white">
            <img
              src="https://images.unsplash.com/photo-1519791883288-dc8bd696e667?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80"
              class="card-img" alt="Ficción">
            <div class="card-img-overlay">
              <h3 class="card-title fw-bold mb-3">Ficción</h3>
              <p class="card-text fs-5 mb-4">
                Explora mundos imaginarios y cautivadoras historias que te transportarán a lugares increíbles.
              </p>
              <a th:href="@{/catalogo(genero=Ficción)}" class="btn btn-light btn-lg">
                <i class="bi bi-book me-2"></i>Explorar
              </a>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card category-card-enhanced text-white">
            <img
              src="https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80"
              class="card-img" alt="No Ficción">
            <div class="card-img-overlay">
              <h3 class="card-title fw-bold mb-3">No Ficción</h3>
              <p class="card-text fs-5 mb-4">
                Descubre conocimientos reales, biografías fascinantes y aprende sobre el mundo que te rodea.
              </p>
              <a th:href="@{/catalogo(genero='No Ficción')}" class="btn btn-light btn-lg">
                <i class="bi bi-lightbulb me-2"></i>Aprender
              </a>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card category-card-enhanced text-white">
            <img
              src="https://images.unsplash.com/photo-1471970471555-19d4b113e9ed?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80"
              class="card-img" alt="Infantil">
            <div class="card-img-overlay">
              <h3 class="card-title fw-bold mb-3">Infantil</h3>
              <p class="card-text fs-5 mb-4">
                Literatura especialmente diseñada para despertar la imaginación de los pequeños lectores.
              </p>
              <a th:href="@{/catalogo(genero=Infantil)}" class="btn btn-light btn-lg">
                <i class="bi bi-heart me-2"></i>Descubrir
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center animate-on-scroll">
        <a th:href="@{/catalogo}" class="btn btn-primary btn-lg">
          <i class="bi bi-grid me-2"></i>Ver todas las categorías
        </a>
      </div>
    </section>

    <!-- Libros Destacados -->
    <section class="container py-5">
      <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
          <h2 class="display-5 fw-bold mb-2">Libros Destacados</h2>
          <p class="lead text-muted">Los más populares de nuestra colección</p>
        </div>
        <div class="d-flex gap-2">
          <button class="carousel-nav-btn" id="prev-featured">
            <i class="bi bi-chevron-left"></i>
          </button>
          <button class="carousel-nav-btn" id="next-featured">
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>

      <div class="books-slider-container">
        <div class="books-slider p-3" id="booksSlider">
          <!-- Mostrar mensaje si no hay contenidos destacados -->
          <div th:if="${contenidosDestacados == null || contenidosDestacados.isEmpty()}" class="w-100">
            <div class="alert alert-info enhanced-card mx-auto" style="max-width: 600px;">
              <i class="bi bi-info-circle me-2"></i>
              Próximamente añadiremos libros destacados a nuestra colección.
            </div>
          </div>

          <!-- Contenidos destacados dinámicos -->
          <div th:each="contenido : ${contenidosDestacados}" class="book-card-enhanced">
            <div class="position-relative">
              <img th:if="${contenido.portadaUrl}" th:src="${contenido.portadaUrl}" class="book-cover-enhanced"
                th:alt="${contenido.obra?.titulo ?: 'Libro'}">
              <img th:unless="${contenido.portadaUrl}" th:src="@{/img/portada-default.jpg}" class="book-cover-enhanced"
                th:alt="${contenido.obra?.titulo ?: 'Libro'}">
              <div class="position-absolute top-0 end-0 m-3">
                <span class="badge bg-success" th:if="${contenido.activo}">
                  <i class="bi bi-check-circle me-1"></i>Disponible
                </span>
                <span class="badge bg-danger" th:unless="${contenido.activo}">
                  <i class="bi bi-x-circle me-1"></i>No disponible
                </span>
              </div>
            </div>
            <div class="p-4">
              <h5 class="fw-bold mb-2" th:text="${contenido.obra.titulo}">Título del libro</h5>
              <p class="text-muted mb-3" th:text="${contenido.obra?.autores != null && !contenido.obra.autores.empty ? 
              contenido.obra.autores[0].nombre : 'Autor desconocido'}">Autor del libro</p>
              <div class="d-grid">
                <a th:href="@{/catalogo/contenido/{id}(id=${contenido.id})}" class="btn btn-primary">
                  <i class="bi bi-eye me-2"></i>Ver detalles
                </a>
              </div>
            </div>
          </div>

          <!-- Libros de ejemplo si no hay contenidos destacados -->
          <div th:if="${contenidosDestacados == null || contenidosDestacados.isEmpty()}" class="book-card-enhanced">
            <div class="position-relative">
              <img src="https://m.media-amazon.com/images/I/71FTb9X6wsL._AC_UF1000,1000_QL80_.jpg"
                class="book-cover-enhanced" alt="Cien años de soledad">
              <div class="position-absolute top-0 end-0 m-3">
                <span class="badge bg-success">
                  <i class="bi bi-check-circle me-1"></i>Disponible
                </span>
              </div>
            </div>
            <div class="p-4">
              <h5 class="fw-bold mb-2">Cien años de soledad</h5>
              <p class="text-muted mb-3">Gabriel García Márquez</p>
              <div class="d-grid">
                <a th:href="@{/catalogo}" class="btn btn-primary">
                  <i class="bi bi-eye me-2"></i>Ver detalles
                </a>
              </div>
            </div>
          </div>

          <div th:if="${contenidosDestacados == null || contenidosDestacados.isEmpty()}" class="book-card-enhanced">
            <div class="position-relative">
              <img
                src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1654371463i/18144590.jpg"
                class="book-cover-enhanced" alt="El principito">
              <div class="position-absolute top-0 end-0 m-3">
                <span class="badge bg-success">
                  <i class="bi bi-check-circle me-1"></i>Disponible
                </span>
              </div>
            </div>
            <div class="p-4">
              <h5 class="fw-bold mb-2">El principito</h5>
              <p class="text-muted mb-3">Antoine de Saint-Exupéry</p>
              <div class="d-grid">
                <a th:href="@{/catalogo}" class="btn btn-primary">
                  <i class="bi bi-eye me-2"></i>Ver detalles
                </a>
              </div>
            </div>
          </div>

          <div th:if="${contenidosDestacados == null || contenidosDestacados.isEmpty()}" class="book-card-enhanced">
            <div class="position-relative">
              <img src="https://m.media-amazon.com/images/I/71-++hbbERL._AC_UF1000,1000_QL80_.jpg"
                class="book-cover-enhanced" alt="Don Quijote">
              <div class="position-absolute top-0 end-0 m-3">
                <span class="badge bg-success">
                  <i class="bi bi-check-circle me-1"></i>Disponible
                </span>
              </div>
            </div>
            <div class="p-4">
              <h5 class="fw-bold mb-2">Don Quijote de la Mancha</h5>
              <p class="text-muted mb-3">Miguel de Cervantes</p>
              <div class="d-grid">
                <a th:href="@{/catalogo}" class="btn btn-primary">
                  <i class="bi bi-eye me-2"></i>Ver detalles
                </a>
              </div>
            </div>
          </div>

          <div th:if="${contenidosDestacados == null || contenidosDestacados.isEmpty()}" class="book-card-enhanced">
            <div class="position-relative">
              <img src="https://m.media-amazon.com/images/I/81gepf1eMqL._AC_UF1000,1000_QL80_.jpg"
                class="book-cover-enhanced" alt="1984">
              <div class="position-absolute top-0 end-0 m-3">
                <span class="badge bg-success">
                  <i class="bi bi-check-circle me-1"></i>Disponible
                </span>
              </div>
            </div>
            <div class="p-4">
              <h5 class="fw-bold mb-2">1984</h5>
              <p class="text-muted mb-3">George Orwell</p>
              <div class="d-grid">
                <a th:href="@{/catalogo}" class="btn btn-primary">
                  <i class="bi bi-eye me-2"></i>Ver detalles
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-5 animate-on-scroll">
        <a th:href="@{/catalogo}" class="btn btn-primary btn-lg">
          <i class="bi bi-collection me-2"></i>Ver catálogo completo
        </a>
      </div>
    </section>

    <section class="cta-section-enhanced">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-8">
            <div class="cta-content">
              <h2 class="display-4 fw-bold mb-4">¿Listo para sumergirte en la lectura?</h2>
              <p class="lead fs-4 mb-5 opacity-90">
                Únete a miles de lectores que ya disfrutan de nuestra biblioteca digital.
                Comienza hoy con una prueba gratuita.
              </p>
              <div class="d-flex flex-column flex-sm-row gap-3">
                <a th:href="@{/planes}" class="btn btn-light btn-lg">
                  <i class="bi bi-star me-2"></i>Ver planes
                </a>
                <a sec:authorize="isAnonymous()" th:href="@{/registro}" class="btn btn-outline-light btn-lg">
                  <i class="bi bi-person-plus me-2"></i>Registrarme gratis
                </a>
                <a sec:authorize="isAuthenticated()" th:href="@{/mis-prestamos}" class="btn btn-outline-light btn-lg">
                  <i class="bi bi-collection-fill me-2"></i>Mi biblioteca
                </a>
              </div>
            </div>
          </div>
          <div class="col-lg-4 text-center d-none d-lg-block">
            <div class="text-white">
              <div class="bg-white rounded-circle p-4 mx-auto mb-4"
                style="width: 150px; height: 150px; display: flex; align-items: center; justify-content: center;">
                <i class="bi bi-book-half" style="font-size: 4rem; color: var(--bs-primary);"></i>
              </div>
              <h3 class="h4 mb-2">+10,000 libros</h3>
              <p class="opacity-75">Disponibles en nuestra biblioteca</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="container py-5">
      <div class="text-center mb-5 animate-on-scroll">
        <h2 class="display-5 fw-bold mb-3">Lo que dicen nuestros usuarios</h2>
        <p class="lead text-muted">Experiencias reales de nuestra comunidad de lectores</p>
      </div>

      <div class="position-relative">
        <div class="d-flex justify-content-end gap-2 mb-4">
          <button class="carousel-nav-btn" id="prev-testimonial">
            <i class="bi bi-chevron-left"></i>
          </button>
          <button class="carousel-nav-btn" id="next-testimonial">
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>

        <div class="row g-4 testimonials-container">
          <div class="col-lg-4 col-md-6 animate-on-scroll">
            <div class="card testimonial-card-enhanced h-100">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-quote text-primary" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
                <p class="fs-5 mb-4 fst-italic">
                  "BiblioVirtual ha transformado mi experiencia de lectura. Puedo acceder a mis libros
                  favoritos desde cualquier lugar y en cualquier momento. ¡Increíble servicio!"
                </p>
                <div class="mb-3">
                  <div class="text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                </div>
                <div class="d-flex align-items-center">
                  <img src="https://randomuser.me/api/portraits/women/12.jpg" class="rounded-circle me-3" width="60"
                    height="60" alt="Usuario">
                  <div>
                    <h6 class="mb-0 fw-bold">Laura Martínez</h6>
                    <small class="text-muted">Profesora</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 animate-on-scroll">
            <div class="card testimonial-card-enhanced h-100">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-quote text-primary" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
                <p class="fs-5 mb-4 fst-italic">
                  "Como estudiante, esta plataforma ha sido fundamental para mis investigaciones. La
                  variedad de títulos académicos es impresionante. ¡Muy recomendado!"
                </p>
                <div class="mb-3">
                  <div class="text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-half"></i>
                  </div>
                </div>
                <div class="d-flex align-items-center">
                  <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle me-3" width="60"
                    height="60" alt="Usuario">
                  <div>
                    <h6 class="mb-0 fw-bold">Carlos Gómez</h6>
                    <small class="text-muted">Estudiante</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 animate-on-scroll">
            <div class="card testimonial-card-enhanced h-100">
              <div class="card-body p-4">
                <div class="mb-3">
                  <i class="bi bi-quote text-primary" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
                <p class="fs-5 mb-4 fst-italic">
                  "La interfaz es muy intuitiva y la selección de libros infantiles es excelente. Mis
                  hijos han desarrollado el hábito de la lectura gracias a BiblioVirtual."
                </p>
                <div class="mb-3">
                  <div class="text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star"></i>
                  </div>
                </div>
                <div class="d-flex align-items-center">
                  <img src="https://randomuser.me/api/portraits/women/67.jpg" class="rounded-circle me-3" width="60"
                    height="60" alt="Usuario">
                  <div>
                    <h6 class="mb-0 fw-bold">Ana Torres</h6>
                    <small class="text-muted">Madre de familia</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección de Documentos Legales -->
    <section class="container py-5">
      <div class="text-center mb-5 animate-on-scroll">
        <h2 class="display-5 fw-bold mb-3">Documentos Legales</h2>
        <p class="lead text-muted">
          Transparencia y cumplimiento normativo en cada aspecto de nuestro servicio
        </p>
      </div>

      <div class="row g-4">
        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced mb-4">
                <i class="bi bi-file-text"></i>
              </div>
              <h3 class="h4 mb-3">Términos y Condiciones</h3>
              <p class="text-muted mb-4">
                Consulta los términos que rigen el uso de nuestra plataforma de manera clara y transparente.
              </p>
              <a th:href="@{/terminos}" class="btn btn-outline-primary">
                <i class="bi bi-arrow-right me-2"></i>Ver documento
              </a>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced mb-4">
                <i class="bi bi-shield-lock"></i>
              </div>
              <h3 class="h4 mb-3">Política de Privacidad</h3>
              <p class="text-muted mb-4">
                Conoce cómo tratamos y protegemos tus datos personales con los más altos estándares.
              </p>
              <a th:href="@{/privacidad}" class="btn btn-outline-primary">
                <i class="bi bi-arrow-right me-2"></i>Ver documento
              </a>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 animate-on-scroll">
          <div class="card enhanced-card text-center h-100">
            <div class="card-body p-4">
              <div class="feature-icon-enhanced mb-4">
                <i class="bi bi-journal-check"></i>
              </div>
              <h3 class="h4 mb-3">Licencias de Contenido</h3>
              <p class="text-muted mb-4">
                Revisa las licencias y permisos de uso del contenido digital disponible en nuestra plataforma.
              </p>
              <a th:href="@{/licencias}" class="btn btn-outline-primary">
                <i class="bi bi-arrow-right me-2"></i>Ver documento
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </th:block>

  <th:block th:fragment="indexScripts">
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Animaciones al hacer scroll
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function (entries) {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('animated');
            }
          });
        }, observerOptions);

        // Observar elementos para animación
        document.querySelectorAll('.animate-on-scroll').forEach(el => {
          observer.observe(el);
        });

        // Slider de libros destacados
        const slider = document.getElementById('booksSlider');
        const prevBtn = document.getElementById('prev-featured');
        const nextBtn = document.getElementById('next-featured');

        if (slider && prevBtn && nextBtn) {
          let currentPosition = 0;
          const slideWidth = window.innerWidth <= 320 ? 208 : window.innerWidth <= 480 ? 230 : 300;
          const visibleCards = Math.floor(slider.parentElement.offsetWidth / slideWidth);
          const totalCards = slider.children.length;
          const maxPosition = Math.max(0, (totalCards - visibleCards) * slideWidth);

          function updateSlider() {
            slider.style.transform = `translateX(-${currentPosition}px)`;

            // Habilitar/deshabilitar botones
            prevBtn.disabled = currentPosition <= 0;
            nextBtn.disabled = currentPosition >= maxPosition;
          }

          prevBtn.addEventListener('click', function () {
            if (currentPosition > 0) {
              currentPosition = Math.max(0, currentPosition - slideWidth);
              updateSlider();
            }
          });

          nextBtn.addEventListener('click', function () {
            if (currentPosition < maxPosition) {
              currentPosition = Math.min(maxPosition, currentPosition + slideWidth);
              updateSlider();
            }
          });

          // Inicializar el estado de los botones
          updateSlider();

          // Responsividad del slider
          window.addEventListener('resize', function () {
            const newSlideWidth = window.innerWidth <= 320 ? 208 : window.innerWidth <= 480 ? 230 : 300;
            const newVisibleCards = Math.floor(slider.parentElement.offsetWidth / newSlideWidth);
            const newMaxPosition = Math.max(0, (totalCards - newVisibleCards) * newSlideWidth);

            if (currentPosition > newMaxPosition) {
              currentPosition = newMaxPosition;
              updateSlider();
            }
          });
        }

        // Carrusel de testimonios
        const testimonialsContainer = document.querySelector('.testimonials-container');
        const prevTestimonial = document.getElementById('prev-testimonial');
        const nextTestimonial = document.getElementById('next-testimonial');

        if (testimonialsContainer && prevTestimonial && nextTestimonial) {
          let currentTestimonial = 0;
          const testimonials = testimonialsContainer.querySelectorAll('.col-lg-4');
          const totalTestimonials = testimonials.length;

          function showTestimonial(index) {
            testimonials.forEach((testimonial, i) => {
              testimonial.style.display = i === index ? 'block' : 'none';
            });
          }

          prevTestimonial.addEventListener('click', function () {
            currentTestimonial = (currentTestimonial - 1 + totalTestimonials) % totalTestimonials;
            showTestimonial(currentTestimonial);
          });

          nextTestimonial.addEventListener('click', function () {
            currentTestimonial = (currentTestimonial + 1) % totalTestimonials;
            showTestimonial(currentTestimonial);
          });

          if (window.innerWidth < 768) {
            showTestimonial(0);
          }
        }

        // Búsqueda con validación
        const searchForm = document.getElementById('searchForm');
        if (searchForm) {
          searchForm.addEventListener('submit', function (e) {
            const searchInput = this.querySelector('input[name="tituloObra"]');
            if (searchInput.value.trim().length < 2) {
              e.preventDefault();
              searchInput.classList.add('is-invalid');
              setTimeout(() => {
                searchInput.classList.remove('is-invalid');
              }, 3000);
            }
          });
        }

        document.querySelectorAll('.enhanced-card, .book-card-enhanced, .testimonial-card-enhanced').forEach(card => {
          card.addEventListener('mouseenter', function () {
            this.style.transition = 'all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)';
          });
        });

        // Smooth scroll para enlaces internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        });
      });
    </script>
  </th:block>
</body>

</html>